<!DOCTYPE html>
<html>

<head>
    <title>Page Title</title>
</head>
<body>
    <h1>
        Metal Gear Square: Mario
    </h1>
    <main>
        <canvas></canvas>
    </main>
    <section>Score: <span><span id="score"></span></span></section>

    <script>
        const canvas = document.querySelector('canvas')
        canvas.width = 300
        canvas.height = 300
        const ctx= canvas.getContext('2d')

        let score = 0

        let player_x = 20
        let player_y = 20
        let base_x = Math.floor(Math.random() * 250)
        let base_y = Math.floor(Math.random() * 250)

        function step(){
        ctx.clearRect(0, 0, 300, 300)
        ctx.fillStyle= 'red'
        ctx.fillRect(player_x, player_y, 10, 10)
        ctx.strokeRect(base_x, base_y, 50, 50)

        if(player_x+10 > base_x && player_y+10 > base_y+10 && player_x < base_x + 50 && player_y < base_y + 50){
            score+=5
            base_x = Math.floor(Math.random() * 250)
            base_y = Math.floor(Math.random() * 250)
        }

        const scoreElement = document.getElementById('score');
        scoreElement.textContent = score;

        requestAnimationFrame(step)
        }
        requestAnimationFrame(step)


        function handleInput(event){
            const key = event.key
            if( key == 'a'){
                player_x -= 10
            }
            else if( key == 'w'){
                player_y -= 10
            } else if ( key == 'd'){
                player_x += 10
            } else if ( key == 's'){
                player_y += 10
            }
        }

        document.addEventListener('keypress', handleInput)
    </script>

    <style>
        canvas{
            border: 1px solid black;
        }
    </style>
</body>

</html>